# Configure DuckDB build options
set(CMAKE_BUILD_TYPE Release CACHE STRING "")
set(BUILD_STATIC_LIBS ON CACHE BOOL "")
set(BUILD_SHARED_LIBS OFF CACHE BOOL "")

# Windows-specific configuration matching official build
if(WIN32)
    set(ENABLE_EXTENSION_AUTOLOADING ON CACHE BOOL "")
    set(ENABLE_EXTENSION_AUTOINSTALL ON CACHE BOOL "")
    set(DISABLE_UNITY ON CACHE BOOL "")
endif()

# Common options
set(ENABLE_SANITIZER OFF CACHE BOOL "")
set(ENABLE_UBSAN OFF CACHE BOOL "")
set(TREAT_WARNINGS_AS_ERRORS OFF CACHE BOOL "")
set(FORCE_WARN_UNUSED OFF CACHE BOOL "")
set(FORCE_32_BIT OFF CACHE BOOL "")
set(STATIC_LIBCPP OFF CACHE BOOL "")
set(BUILD_SHELL ON CACHE BOOL "")
set(BUILD_EXTENSIONS "" CACHE STRING "")
set(DISABLE_BUILTIN_EXTENSIONS OFF CACHE BOOL "")

add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/deps/duckdb EXCLUDE_FROM_ALL)
add_library(DuckDB::duckdb ALIAS duckdb_static) # alias for convenience